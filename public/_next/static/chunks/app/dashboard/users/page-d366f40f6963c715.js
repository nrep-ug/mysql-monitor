(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{5379:function(e,s,t){Promise.resolve().then(t.bind(t,9691))},9691:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var a=t(7437),r=t(2265),n=t(8333),i=t(1301),l=t(743),c=t(2824),o=t(6581),d=t(382),m=t(4993),u=t(6716),h=t(9639),x=t(4527);function f(){let[e,s]=(0,r.useState)(""),[t,f]=(0,r.useState)(""),[j,g]=(0,r.useState)(""),[p,v]=(0,r.useState)(""),[N,Z]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),{register:w}=(0,n.a)(),{showToast:S}=(0,l.p)(),C=async a=>{if(a.preventDefault(),y(null),j!==p){y("Passwords do not match");return}Z(!0);try{await w(e,t,j),S({title:"Success",message:"User registered successfully",variant:"success"}),s(""),f(""),g(""),v("")}catch(e){e instanceof Error?y(e.message):y("An unknown error occurred")}finally{Z(!1)}};return(0,a.jsx)(i.Z,{children:(0,a.jsxs)(c.Z,{fluid:!0,children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("h1",{className:"h3",children:"User Management"})}),(0,a.jsxs)(o.Z,{className:"mx-auto",style:{maxWidth:"500px"},children:[(0,a.jsx)(o.Z.Header,{children:(0,a.jsx)(o.Z.Title,{className:"h5 mb-0",children:"Create New User"})}),(0,a.jsxs)(o.Z.Body,{children:[b&&(0,a.jsx)(d.Z,{variant:"danger",className:"mb-4",children:b}),(0,a.jsxs)(m.Z,{onSubmit:C,children:[(0,a.jsxs)(m.Z.Group,{className:"mb-3",controlId:"username",children:[(0,a.jsx)(m.Z.Label,{children:"Username"}),(0,a.jsx)(m.Z.Control,{value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,a.jsxs)(m.Z.Group,{className:"mb-3",controlId:"email",children:[(0,a.jsx)(m.Z.Label,{children:"Email"}),(0,a.jsx)(m.Z.Control,{type:"email",value:t,onChange:e=>f(e.target.value),required:!0})]}),(0,a.jsxs)(m.Z.Group,{className:"mb-3",controlId:"password",children:[(0,a.jsx)(m.Z.Label,{children:"Password"}),(0,a.jsx)(m.Z.Control,{type:"password",value:j,onChange:e=>g(e.target.value),required:!0})]}),(0,a.jsxs)(m.Z.Group,{className:"mb-4",controlId:"confirmPassword",children:[(0,a.jsx)(m.Z.Label,{children:"Confirm Password"}),(0,a.jsx)(m.Z.Control,{type:"password",value:p,onChange:e=>v(e.target.value),required:!0})]}),(0,a.jsx)(u.Z,{variant:"primary",type:"submit",className:"w-100 d-flex align-items-center justify-content-center",disabled:N,children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Creating User..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{size:16,className:"me-2"}),"Create User"]})})]})]})]})]})})}},1301:function(e,s,t){"use strict";t.d(s,{Z:function(){return Z}});var a=t(7437),r=t(2265),n=t(1396),i=t.n(n),l=t(4033),c=t(8333),o=t(9654),d=t(2824),m=t(6716),u=t(6344),h=t(8427),x=t(5119),f=t(998),j=t(5750),g=t(9409),p=t(7332),v=t(8004),N=t(5883);function Z(e){let{children:s}=e,{user:t,logout:n}=(0,c.a)(),Z=(0,l.usePathname)(),[b,y]=(0,r.useState)(!1),w=()=>y(!1),S=[{name:"Dashboard",href:"/dashboard",icon:x.Z},{name:"Status History",href:"/dashboard/history",icon:f.Z},{name:"User Management",href:"/dashboard/users",icon:j.Z},{name:"Settings",href:"/dashboard/settings",icon:g.Z}];return(0,a.jsxs)("div",{className:"d-flex",children:[(0,a.jsx)(o.Z,{expand:!1,className:"bg-light d-lg-none w-100 mb-3",fixed:"top",children:(0,a.jsxs)(d.Z,{fluid:!0,children:[(0,a.jsxs)(o.Z.Brand,{href:"/dashboard",className:"d-flex align-items-center",children:[(0,a.jsx)(p.Z,{className:"me-2",size:24}),(0,a.jsx)("span",{children:"NREP Monitor"})]}),(0,a.jsx)(o.Z.Toggle,{"aria-controls":"sidebar-nav",onClick:()=>y(!0),as:m.Z,variant:"outline-primary",children:(0,a.jsx)(v.Z,{size:20})})]})}),(0,a.jsxs)(u.Z,{show:b,onHide:w,placement:"start",className:"w-75 max-w-300",style:{maxWidth:"300px"},children:[(0,a.jsx)(u.Z.Header,{closeButton:!0,children:(0,a.jsxs)(u.Z.Title,{className:"d-flex align-items-center",children:[(0,a.jsx)(p.Z,{className:"me-2",size:24}),(0,a.jsx)("span",{children:"NREP Monitor"})]})}),(0,a.jsx)(u.Z.Body,{className:"p-0",children:(0,a.jsxs)("div",{className:"d-flex flex-column h-100",children:[(0,a.jsx)(h.Z,{className:"flex-column p-3",children:S.map(e=>(0,a.jsxs)(h.Z.Link,{as:i(),href:e.href,className:"d-flex align-items-center py-2 ".concat(Z===e.href?"active":""),onClick:w,children:[(0,a.jsx)(e.icon,{className:"me-3",size:18}),e.name]},e.name))}),(0,a.jsxs)("div",{className:"mt-auto p-3 border-top",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,a.jsx)("div",{className:"d-flex align-items-center justify-content-center bg-primary text-white rounded-circle me-2",style:{width:"32px",height:"32px"},children:null==t?void 0:t.username.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"mb-0 fw-medium",children:null==t?void 0:t.username}),(0,a.jsx)("p",{className:"mb-0 text-muted small",children:null==t?void 0:t.email})]})]}),(0,a.jsxs)(m.Z,{variant:"outline-danger",className:"w-100 d-flex align-items-center justify-content-center",onClick:n,children:[(0,a.jsx)(N.Z,{size:16,className:"me-2"}),"Logout"]})]})]})})]}),(0,a.jsxs)("div",{className:"sidebar bg-light d-none d-lg-flex flex-column",children:[(0,a.jsxs)("div",{className:"p-3 border-bottom d-flex align-items-center",children:[(0,a.jsx)(p.Z,{className:"me-2",size:24}),(0,a.jsx)("h5",{className:"mb-0 fw-bold",children:"NREP Monitor"})]}),(0,a.jsx)(h.Z,{className:"flex-column p-3",children:S.map(e=>(0,a.jsxs)(h.Z.Link,{as:i(),href:e.href,className:"d-flex align-items-center py-2 ".concat(Z===e.href?"active":""),children:[(0,a.jsx)(e.icon,{className:"me-3",size:18}),e.name]},e.name))}),(0,a.jsxs)("div",{className:"mt-auto p-3 border-top",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,a.jsx)("div",{className:"d-flex align-items-center justify-content-center bg-primary text-white rounded-circle me-2",style:{width:"32px",height:"32px"},children:null==t?void 0:t.username.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"mb-0 fw-medium",children:null==t?void 0:t.username}),(0,a.jsx)("p",{className:"mb-0 text-muted small",children:null==t?void 0:t.email})]})]}),(0,a.jsxs)(m.Z,{variant:"outline-danger",className:"w-100 d-flex align-items-center justify-content-center",onClick:n,children:[(0,a.jsx)(N.Z,{size:16,className:"me-2"}),"Logout"]})]})]}),(0,a.jsxs)("div",{className:"main-content",children:[(0,a.jsx)("div",{className:"d-lg-none",style:{height:"56px"}}),s]})]})}},743:function(e,s,t){"use strict";t.d(s,{V:function(){return c},p:function(){return o}});var a=t(7437),r=t(2265),n=t(8124),i=t(7679);let l=(0,r.createContext)(void 0);function c(e){let{children:s}=e,[t,c]=(0,r.useState)([]),o=e=>{c(s=>s.filter(s=>s.id!==e))};return(0,r.useEffect)(()=>{let e=[];return t.forEach(s=>{if(!1!==s.autohide){let t=setTimeout(()=>{o(s.id)},5e3);e.push(t)}}),()=>{e.forEach(e=>clearTimeout(e))}},[t]),(0,a.jsxs)(l.Provider,{value:{showToast:e=>{let s=Math.random().toString(36).substring(2,9);c(t=>[...t,{...e,id:s}])}},children:[s,(0,a.jsx)(n.Z,{position:"top-end",className:"p-3",style:{zIndex:1060},children:t.map(e=>(0,a.jsxs)(i.Z,{onClose:()=>o(e.id),bg:e.variant,delay:5e3,autohide:!1!==e.autohide,children:[(0,a.jsx)(i.Z.Header,{children:(0,a.jsx)("strong",{className:"me-auto",children:e.title})}),(0,a.jsx)(i.Z.Body,{className:"danger"===e.variant||"dark"===e.variant?"text-white":"",children:e.message})]},e.id))})]})}function o(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},8333:function(e,s,t){"use strict";t.d(s,{H:function(){return i},a:function(){return l}});var a=t(7437),r=t(2265);let n=(0,r.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("user");e&&s&&(c(e),i(JSON.parse(s))),d(!1)},[]);let h=async(e,s)=>{d(!0),u(null);try{let t=await fetch("".concat("https://nrepserver.derrickml.com","/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})}),a=await t.json();if(!t.ok)throw Error(a.error||"Login failed");c(a.token),i(a.user),localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user))}catch(e){u(e instanceof Error?e.message:"An unknown error occurred")}finally{d(!1)}},x=async(e,s,t)=>{d(!0),u(null);try{let a=await fetch("".concat("https://nrepserver.derrickml.com","/api/register"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({username:e,email:s,password:t})}),r=await a.json();if(!a.ok)throw Error(r.error||"Registration failed")}catch(e){throw u(e instanceof Error?e.message:"An unknown error occurred"),e}finally{d(!1)}};return(0,a.jsx)(n.Provider,{value:{user:t,token:l,login:h,logout:()=>{i(null),c(null),localStorage.removeItem("token"),localStorage.removeItem("user")},register:x,isLoading:o,error:m},children:s})}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[363,930,63,42,971,938,744],function(){return e(e.s=5379)}),_N_E=e.O()}]);